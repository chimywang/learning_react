{"version":3,"sources":["../source/common.js"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["import path from 'path'\r\nimport fs from 'fs'\r\n\r\nimport require_hacker from 'require-hacker'\r\n\r\nimport { is_object, exists, starts_with } from './helpers'\r\n\r\n// returns a stub for webpack-assets.json if it doesn't exist yet\r\n// (because node.js and webpack are being run in parallel in development mode)\r\nexport function default_webpack_assets()\r\n{\r\n\tconst webpack_assets =\r\n\t{\r\n\t\tjavascript: {},\r\n\t\tstyles: {},\r\n\t\tassets: {}\r\n\t}\r\n\r\n\treturn webpack_assets\r\n}\r\n\r\n// adds missing fields, etc\r\nexport function normalize_options(options)\r\n{\r\n\t// parameters check\r\n\tfor (let key of Object.keys(options))\r\n\t{\r\n\t\tswitch (key)\r\n\t\t{\r\n\t\t\tcase 'assets':\r\n\t\t\t\tif (!is_object(options[key]))\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `an object`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'debug':\r\n\t\t\t\tif (typeof options[key] !== 'boolean')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a boolean`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'verbose':\r\n\t\t\t\tif (typeof options[key] !== 'boolean')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a boolean`)\r\n\t\t\t\t}\r\n\t\t\t\t// Legacy `verbose` option is converted to `verbosity`\r\n\t\t\t\tconsole.log('[webpack-isomorphic-tools] WARNING: `verbose` option is now called `verbosity`')\r\n\t\t\t\tif (options.verbose)\r\n\t\t\t\t{\r\n\t\t\t\t\toptions.verbosity = verbosity_levels.webpack_stats_for_each_build\r\n\t\t\t\t}\r\n\t\t\t\tdelete options.verbose\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'verbosity':\r\n\t\t\t\tif (typeof options[key] !== 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a string`)\r\n\t\t\t\t}\r\n\t\t\t\tif (Object.keys(verbosity_levels).map(key => verbosity_levels[key]).indexOf(options[key]) < 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`Unknown \"verbosity\" passed: ${options[key]}`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'port':\r\n\t\t\t\tif (typeof options[key] !== 'number')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a number`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'webpack_assets_file_path':\r\n\t\t\tcase 'webpack_stats_file_path':\r\n\t\t\t\tif (typeof options[key] !== 'string')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a string`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'alias':\r\n\t\t\t\tif (!is_object(options[key]))\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `an object`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'modules_directories':\r\n\t\t\t\tif (!Array.isArray(options[key]))\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `an array`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'require_context':\r\n\t\t\t\tif (typeof options[key] !== 'boolean')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a boolean`)\r\n\t\t\t\t}\r\n\t\t\t\t// Legacy `require_context` option is converted to `patch_require`\r\n\t\t\t\tconsole.log('[webpack-isomorphic-tools] WARNING: `require_context` option is now called `patch_require`')\r\n\t\t\t\tdelete options.require_context\r\n\t\t\t\toptions.patch_require = true\r\n\t\t\t\tbreak\r\n\r\n\t\t\tcase 'patch_require':\r\n\t\t\t\tif (typeof options[key] !== 'boolean')\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow new Error(`\"${key}\" configuration parameter must be ` + `a boolean`)\r\n\t\t\t\t}\r\n\t\t\t\tbreak\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(`Unknown configuration parameter \"${key}\"`)\r\n\t\t}\r\n\t}\r\n\r\n\t// if no assets specified (for whatever reason), make it an empty array\r\n\tif (!options.assets)\r\n\t{\r\n\t\t// options.assets = {}\r\n\t\tthrow new Error('You must specify \"assets\" parameter in webpack-isomorphic-tools configuration')\r\n\t}\r\n\r\n\t// webpack-assets.json path, relative to the project base path\r\n\toptions.webpack_assets_file_path = options.webpack_assets_file_path || 'webpack-assets.json'\r\n\r\n\t// webpack-stats.json path, relative to the project base path\r\n\toptions.webpack_stats_file_path = options.webpack_stats_file_path || 'webpack-stats.json'\r\n\r\n\t// if Webpack aliases are supplied, validate them\r\n\tif (options.alias)\r\n\t{\r\n\t\tfor (let key of Object.keys(options.alias))\r\n\t\t{\r\n\t\t\tif (typeof options.alias[key] !== 'string')\r\n\t\t\t{\r\n\t\t\t\tthrow new Error(`Invalid alias for \"${key}\": \"${options.alias[key]}\"`)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// generate names (if required) for each user defined asset type, normalize extensions\r\n\tfor (let asset_type of Object.keys(options.assets))\r\n\t{\r\n\t\tconst description = options.assets[asset_type]\r\n\r\n\t\t// normalize extensions\r\n\t\tif (description.extension)\r\n\t\t{\r\n\t\t\t// sanity check\r\n\t\t\tif (Array.isArray(description.extension))\r\n\t\t\t{\r\n\t\t\t\tthrow new Error(`Use \"extensions\" key instead of \"extension\" for specifying an array of file extensions for assets of type \"${asset_type}\"`)\r\n\t\t\t}\r\n\r\n\t\t\t// sanity check\r\n\t\t\tif (typeof description.extension !== 'string')\r\n\t\t\t{\r\n\t\t\t\tthrow new Error(`\"extension\" value must be a string for assets of type \"${asset_type}\"`)\r\n\t\t\t}\r\n\r\n\t\t\t// normalize\r\n\t\t\tdescription.extensions = [description.extension]\r\n\t\t\tdelete description.extension\r\n\t\t}\r\n\r\n\t\t// sanity check\r\n\t\tif (!description.extensions)\r\n\t\t{\r\n\t\t\tthrow new Error(`You must specify file extensions for assets of type \"${asset_type}\"`)\r\n\t\t}\r\n\r\n\t\t// parameters check\r\n\t\tfor (let key of Object.keys(description))\r\n\t\t{\r\n\t\t\tswitch (key)\r\n\t\t\t{\r\n\t\t\t\tcase 'extensions':\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'exclude':\r\n\t\t\t\tcase 'include':\r\n\t\t\t\t\tif (!Array.isArray(description[key]))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error(`\"${key}\" must be an array for asset type \"${asset_type}\"`)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (let clusion of description[key])\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif (typeof clusion !== 'string'\r\n\t\t\t\t\t\t\t&& !(clusion instanceof RegExp)\r\n\t\t\t\t\t\t\t&& typeof clusion !== 'function')\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tthrow new Error(`Unsupported object type for exclusion/inclusion \"${clusion}\" for asset type \"${asset_type}\"`)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'filter':\r\n\t\t\t\tcase 'parser':\r\n\t\t\t\tcase 'path':\r\n\t\t\t\t\tif (typeof description[key] !== 'function')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error(`\"${key}\" must be a function for asset type \"${asset_type}\"`)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tcase 'regular_expression':\r\n\t\t\t\t\tif (!(description[key] instanceof RegExp))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tthrow new Error(`\"${key}\" must be a regular expression for asset type \"${asset_type}\"`)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error(`Unknown property \"${key}\" for asset type \"${asset_type}\"`)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// alias the path if an alias is found,\r\n// and resolve it to a global filesystem path\r\nexport function alias_hook(path, module, project_path, aliases, log)\r\n{\r\n\t// possibly alias the path\r\n\tconst aliased_path = alias(path, aliases)\r\n\r\n\t// return if an alias not found\r\n\tif (!aliased_path)\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\t// if an alias is found, require() the correct path\r\n\tlog.debug(`require(\"${path}\") was called and an alias was found, so aliasing to module path \"${aliased_path}\"`)\r\n\r\n\t// resolve the path to a real filesystem path (resolves `npm link`, etc)\r\n\tconst global_path = require_hacker.resolve(aliased_path, module)\r\n\tlog.debug(` resolved the path for the aliased module to ${global_path}`)\r\n\r\n\treturn global_path\r\n\r\n\t// const result = require(global_path)\r\n\t// // log.debug(` the path was found`)\r\n\r\n\t// return require_hacker.to_javascript_module_source(result)\r\n}\r\n\r\n// alias the path provided the aliases map\r\nfunction alias(path, aliases)\r\n{\r\n\t// if it's a path to a file - don't interfere\r\n\tif (starts_with(path, '.') || starts_with(path, '/'))\r\n\t{\r\n\t\treturn\r\n\t}\r\n\r\n\t// extract module name from the path\r\n\tconst slash_index = path.indexOf('/')\r\n\tconst module_name = slash_index >= 0 ? path.substring(0, slash_index) : path\r\n\tconst rest = slash_index >= 0 ? path.substring(slash_index) : ''\r\n\r\n\t// find an alias\r\n\tconst alias = aliases[module_name]\r\n\r\n\t// if an alias is found, require() the correct path\r\n\tif (alias)\r\n\t{\r\n\t\treturn alias + rest\r\n\t}\r\n}\r\n\r\n// converts global asset path to local-to-the-project asset path\r\nexport function normalize_asset_path(global_asset_path, project_path)\r\n{\r\n\t// // if this path is outside project folder,\r\n\t// // return it as a global path\r\n\t// if (!starts_with(global_asset_path, project_path + path.sep))\r\n\t// {\r\n\t// \treturn global_asset_path\r\n\t// }\r\n\r\n\t// this path is inside project folder,\r\n\t// convert it to a relative path\r\n\r\n\t// asset path relative to the project folder\r\n\tlet asset_path = path.relative(project_path, global_asset_path)\r\n\r\n\t// for Windows:\r\n\t//\r\n\t// convert Node.js path to a correct Webpack path\r\n\tasset_path = uniform_path(asset_path)\r\n\r\n\treturn asset_path\r\n}\r\n\r\n// for Windows:\r\n//\r\n// converts Node.js path to a correct Webpack path\r\nexport function uniform_path(asset_path)\r\n{\r\n\t// correct slashes\r\n\tasset_path = asset_path.replace(/\\\\/g, '/')\r\n\r\n\t// add './' in the beginning if it's missing (for example, in case of Windows)\r\n\tif (asset_path.indexOf('.') !== 0)\r\n\t{\r\n\t\tasset_path = './' + asset_path\r\n\t}\r\n\r\n\treturn asset_path\r\n}\r\n\r\nexport const verbosity_levels =\r\n{\r\n\tno_webpack_stats             : 'no webpack stats',\r\n\twebpack_stats_for_each_build : 'webpack stats for each build'\r\n}"]}